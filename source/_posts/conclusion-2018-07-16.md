---
title: 最近总结-2018-07-16
copyright: true
date: 2018-07-16 16:15:29
tags: 总结
categories: 总结
---

# 最近总结-2018-07-16

最近公司机房搬迁，大大小小演练，解决问题搞了差不多一个月。在以前的公司其实从来没有遇到过应用搬迁的事情。那个时候还是个开发写代码的。可能有搬迁也不需要我来帮忙，但是这次公司搬迁，从前到后。基本上全程参与。只有一个感受，那就是真的是严谨的要命。

## 1：演练

搬迁之前，我们内部就演练了3次，之后申请搬迁后的资源又演练一次，每一次都做了详尽的记录，细微到每一条命令是怎么敲，可以说，拿到文档，就算你啥也不会，你也可以完成。为啥这么细微了，因为有一部分是我的写的文档，写了之后，在下一轮测试演练，拿给别的同事做我的部分。发现他尽然无法完成。这个时候发现，原来我认为的简单，在别人那里是那么复杂。
<!--more-->
## 2：记录

在演练的时候会有各种异常，所有人都必须将遇到的异常以及所有异常的原因，解决方法，一一列出。这种情况保证了在异常出现，如果当事人不在，应该怎么处理。

## 3：协调

协调指的是协调人员，协调机器。由统一的人负责协调资源，什么时候资源会出来，哪些资源先出来，资源出来后，哪些应用可以先启动。在统筹人员那里都有。甚至连后勤都来了。谁来保证住房，哪些人去订餐。相当于大事小事全都准备好了。

## 4：时间

在开始切换前，先做一次正式环境测试，跑通所有应用。这个时候拿的都是一期的环境和配置，二期只是再重新部署一遍。第一次跑通之后开始切换，提前在官网发出声明，通知相应的切换人员，网络组，主机组，容器组等。之后再将所有的人员统一在办公环境办公，有问题及时解决，然后按照预定好的时间1——3点主机切换，2-4点网络切换，3点应用停掉一期，DB断开所有连接，。。。切换DB，启动应用...一步一步。基本上不会出错。

## 5：复查验证

保证所有切换的应用都是可用的。必须是所有应用，然后才是所有人完成搬迁。

总体来说，每一个细节都会照顾到，而且在正式搬迁之前需要进行多次验证，多次演练，之后在正式搬迁的时候才能将风险降到最低。
