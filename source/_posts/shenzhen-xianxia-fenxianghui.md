---
title: 极光推送线下交流分享会
date: 2018-03-17 23:35:34
tags: 随笔
categories: 随笔
---
# 极光推送线下交流分享会

周六参加了异常极光推送组织的线下架构师分享会。当然我只是去学习的。

<!--more-->

首先是极光推送的架构师分享极光面对的问题以及架构进化历史。他们呢的架构我就听懂了一个从vm迁移到k8s,docker。另外他们是用c++开发的，采用的是并行处理。实话C++忘记的差不多了。然后他们对于特殊vip客户做了特殊处理。我特别感兴趣一个问题，他说他们有上亿的激活用户，那么怎么给每个用户分标签了？我们在使用机关推送的时候其实是有按男女，按地区，按年龄等来分别推送的。那他们怎么做到在亿级别的用户数上做到很快的处理？他说的方案是**请求并行处理**；一个请求可以拆分成多个请求，然后结果统一汇总。这个怎么感觉是多线程并发么？

另外还听到了一个服务化层的概念。比如mq，他说他们所有的请求都是走mq异步的。但是现在并发量大的情况下，mq已经抗不住了。这个时候他们提出mq服务化。就是说mq可能有kafka，rabbitmq，rocketmq。他们可能是在这些mq的上层包装一层，然后底下用这些mq的集群，而对外就是一个mq服务接口层，使用者完全感觉不出来，还是跟以前一样，而这个服务层有路由策略和处理。另外他们的mq是单实例，也就是非集群方式8c16G。

第二位分享的是平安云的架构师，主要讲的是k8s。已经他们的云平台服务搭建，已经在内部的使用。项目先要考虑活下来，才会考虑去优化。这是他分享的一句话。另外会下我还问了一下他关于日志的问题。日志丢包怎么解决，他的回答是切分，然后采用一些策略来做。防止掉大部分。小部分丢包可以自己再采用策略补偿。

第三位分享的是阿里豌豆荚的架构师，很明显，这是一个阿里互联网的气息的人。我第一次听到下级给上级打绩效。这个不得不佩服，他也说了136淘宝的策略，如果两年1，必须淘汰，每年必须有人1。厉害了。然后他分享给我们的是抓好数据结构。熟悉一门新的语言先去看它的api文档，但是如果你熟悉数据结构，你会发现api文档里面其实通用的，因为每个语言用的数据结构还是那些只是实现方式有点不一样罢了。他还分享了一个架构模式进程：mvc->mvp->mvvm。性能优化方法面他说先要有个量化下来，他主要是安卓开发推荐我们内存优化的工具是memory，monitor，heap view,aliocation Tracker，MAT。
内存泄漏：应用不停的申请新内存；
内存溢出：需要一个大内存，实际只有一个小内存;
在安卓中使用轻量级的数据结构，不用hashmap的原因是自动装箱，自动拆箱。
技术的进化历史：
服务业务---> 解决需求
反哺业务---> 留存
提升业务

作为技术人需要的不但专，而且要博。专而博。

最后的提问环节，不得不说，阿里的影响力那是真的大啊，一堆人提问，一堆人加微信。厉害了。
