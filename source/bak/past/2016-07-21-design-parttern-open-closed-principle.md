---
layout:     post
title:      "设计模式之开闭原则"
subtitle:   "架构师的必经路"
date:       2016-07-21 03:19:00
author:     "chenzhijun"
header-img: "img/post-bg-android.jpg"
catalog: true
tags:
    - 设计模式
    - Java
---

《设计模式之禅》-- 开闭原则
================================

> 三个问题：什么是开闭原则？为什么使用它？怎么使用它？

### 定义：Software entites like classes,modules and funcitons should be open for exitension but closed for modifications.（软件实体如类，模块和函数应该对扩展开放，对修改关闭。）
其含义就是说一个软件实体应该通过它的扩展来实现变化，而不是修改已有的代码来实现。

### 为什么使用它？
一个软件在生命周期内肯定会有需求变化，比如书店买书，平常逢年过节是否也需要打个折来促销啊？这就是一种变化。但这个时候我们应该去改动我们以前写的代码么？假设想想：如果改了，这次只是打折，下次要是清仓，难道我们又要去改代码？所以，开闭原则就体现出来了。我们需要的是另外实现一个类继承我们原先的类，然后再在新类里面做我们的业务需求。当然这里说不改，不是说一点也不改，而是说尽量少改或者不改。

>#### 变化分类:
>1.逻辑变化：比如修改一个a*b+c,这种就可以修改原有类来完成，当然前提条件是所有依赖或关联类都是这个逻辑。
>
>2.子模块变化：一个模块变化对其它模块产生影响，特别是低层次的模块变化引起高层次的模块变化。因此有时候高层次模块修改是必然的。
>
>3.可见视图变化：用户使用的界面，如JSP程序、Swing界面等，这种变化可能会引起连锁反应。如果只是改个界面布局还好，如果是这个表单里面加个字段，那可能就变化很大了。 

##### 为什么使用开闭原则?
存在即合理。开闭原则有它存在的必要性。设计模式6原则中，开闭原则是最基础的一个原则，其它五个都是开闭原则的具体形态，即指导设计的工具和方法，而开闭原则才是其精神领袖。用Java来说：开闭原则为抽象类，其它五个为实现类。其优点可以从测试，代码复用，代码可维护性，面向对象开发者几方面来想。
### 如何使用开闭原则？
1.抽象约束。抽象一组事物的通用描叙，没有具体实现，以之随需求变化而变化。
2.元数据控制模块行为。
	元数据：用来描叙环境和数据的数据，如配置参数，参数可以从文件中获得，也可以从数据库中获得。
3.制定项目章程。对项目来说，约定优于配置。
4.封装变化。 第一：将相同的变化封装到一个接口或抽象类中；第二，将不同的变化封装到不同的接口或抽象类中，不应该有两个不同的变化出现在同一个接口或者抽象类中。封装变化，也就是受保护的变化，找出预计有变化或者不稳定的店，我们为这些变化点创建稳定的接口。

<font style="color:red;">建立稳定、灵活、健壮的设计，开闭原则是重中之重。必须清楚：开闭原则也只是一个原则，项目规章非常重要，预知变化。最后一点：<h2>拥抱变化</h2></font>




















































